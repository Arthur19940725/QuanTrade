# Kronos 多市场股票预测功能使用说明

## 功能概述

Kronos系统现已支持通过股票名称或股票代码预测多个市场的股票走势，包括：
- **A股市场** - 中国A股
- **港股市场** - 香港股票市场  
- **美股市场** - 美国股票市场
- **加密货币** - 数字货币市场

## 主要特性

### 1. 智能股票搜索
- 支持中英文股票名称搜索
- 支持股票代码精确匹配
- 实时搜索建议和自动补全
- 多市场统一搜索界面

### 2. 多市场数据支持
- **A股**: 支持沪深股票，如 600519(贵州茅台)、000858(五粮液)
- **港股**: 支持港交所股票，如 0700(腾讯控股)、0941(中国移动)  
- **美股**: 支持纳斯达克/纽交所，如 AAPL(苹果)、MSFT(微软)
- **加密货币**: 支持主流数字货币，如 BTC(比特币)、ETH(以太坊)

### 3. 智能预测算法
- **Kronos模型**: 使用先进的时间序列Transformer模型
- **技术分析**: 当模型不可用时，使用技术指标分析
- **自适应预测**: 根据数据质量自动选择最佳预测方法

## 使用方法

### Web界面使用

1. **启动Web服务**
   ```bash
   cd webui
   python app.py
   ```
   访问 http://localhost:7070

2. **选择数据源**
   - 在控制面板中选择"在线股票数据"
   - 系统会自动切换到股票搜索模式

3. **搜索股票**
   - 在搜索框中输入股票代码或名称
   - 支持中英文搜索，如：
     - "苹果" 或 "AAPL" 
     - "腾讯" 或 "0700"
     - "比特币" 或 "BTC"

4. **选择股票**
   - 点击搜索结果中的股票
   - 系统会显示股票详细信息

5. **设置预测参数**
   - 预测天数：1-30天（默认7天）
   - 历史数据天数：30-365天（默认60天）

6. **执行预测**
   - 点击"预测股票走势"按钮
   - 等待预测完成

7. **查看结果**
   - 当前价格和预测价格
   - 预计涨跌幅和趋势判断
   - 详细的每日预测数据
   - 预测置信度和使用的模型

### 编程接口使用

```python
from stock_predictor import MultiMarketStockPredictor

# 创建预测器
predictor = MultiMarketStockPredictor()

# 搜索股票
results = predictor.search_stocks("苹果")
print(f"找到 {len(results)} 个结果")

# 预测股票
prediction = predictor.predict_stock("AAPL", "us_stocks", pred_days=7)
if prediction['success']:
    print(f"当前价格: ${prediction['current_price']}")
    print(f"预测价格: ${prediction['summary']['final_price']}")
    print(f"涨跌幅: {prediction['summary']['total_change_pct']}%")
```

## API接口

### 搜索股票
```http
POST /api/search-stocks
Content-Type: application/json

{
    "query": "苹果"
}
```

### 预测股票
```http
POST /api/predict-stock
Content-Type: application/json

{
    "symbol": "AAPL",
    "market": "us_stocks", 
    "pred_days": 7,
    "lookback_days": 60
}
```

### 获取市场列表
```http
GET /api/stock-markets
```

## 支持的股票示例

### A股市场 (cn_stocks)
- 600519 - 贵州茅台
- 000858 - 五粮液  
- 600036 - 招商银行
- 000001 - 平安银行
- 002415 - 海康威视

### 港股市场 (hk_stocks)  
- 0700 - 腾讯控股
- 0941 - 中国移动
- 1299 - 友邦保险
- 0005 - 汇丰控股
- 1211 - 比亚迪

### 美股市场 (us_stocks)
- AAPL - 苹果公司
- MSFT - 微软公司  
- GOOGL - 谷歌
- TSLA - 特斯拉
- META - Meta平台

### 加密货币 (crypto)
- BTC - 比特币
- ETH - 以太坊
- BNB - 币安币  
- SOL - 索拉纳
- DOGE - 狗狗币

## 预测准确性说明

### 影响因素
- **历史数据质量**: 更多高质量历史数据提高预测准确性
- **市场波动性**: 高波动市场预测难度更大
- **预测时间长度**: 短期预测通常比长期预测更准确
- **模型选择**: Kronos模型通常比技术分析更准确

### 置信度等级
- **High**: 使用Kronos模型，数据充足
- **Medium**: 使用技术分析或数据有限
- **Low**: 数据不足或市场异常

## 注意事项

1. **投资风险提示**
   - 预测结果仅供参考，不构成投资建议
   - 股市有风险，投资需谨慎
   - 请结合多种分析方法做出投资决策

2. **数据来源**
   - 加密货币数据来自Binance API
   - 美股和港股数据来自Yahoo Finance
   - A股数据当前使用模拟数据（需要配置第三方数据源）

3. **使用限制**
   - 部分API有请求频率限制
   - 网络连接可能影响数据获取
   - 某些股票可能暂时无法获取数据

## 扩展功能

### 添加新股票
可以在 `stock_predictor.py` 中的 `StockSymbolResolver` 类中添加新的股票信息：

```python
self.stock_databases['us_stocks']['NVDA'] = ['英伟达', 'NVIDIA Corporation', 'NASDAQ']
```

### 集成新数据源
可以在 `MultiMarketDataFetcher` 类中添加新的数据获取方法：

```python
def fetch_new_market_data(self, symbol: str, days: int) -> pd.DataFrame:
    # 实现新的数据获取逻辑
    pass
```

## 故障排除

### 常见问题

1. **搜索无结果**
   - 检查股票代码或名称拼写
   - 尝试使用英文名称或标准代码
   - 确认股票在支持的市场范围内

2. **预测失败**
   - 检查网络连接
   - 确认股票代码正确
   - 尝试减少预测天数或历史数据天数

3. **数据获取超时**
   - 检查API服务是否可用
   - 尝试重新执行预测
   - 考虑使用VPN或代理

### 日志查看
- Web界面：查看浏览器开发者工具控制台
- 命令行：查看Python程序输出
- 服务器日志：查看Flask应用日志

## 技术支持

如有问题或建议，请：
1. 查看错误日志和控制台输出
2. 尝试使用测试脚本验证功能
3. 检查网络连接和API可用性
4. 更新到最新版本

---

*Kronos 多市场股票预测系统 - 让AI为您的投资决策提供参考*